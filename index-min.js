let playId,sequence=[],playerSequence=[],colors=["green","red","yellow","blue"],level=0,playerTurn=!1,green=new Audio("https://s3.amazonaws.com/freecodecamp/simonSound1.mp3"),red=new Audio("https://s3.amazonaws.com/freecodecamp/simonSound2.mp3"),yellow=new Audio("https://s3.amazonaws.com/freecodecamp/simonSound3.mp3"),blue=new Audio("https://s3.amazonaws.com/freecodecamp/simonSound4.mp3"),error=new Audio("https://s3.amazonaws.com/adam-recvlohe-sounds/error.wav"),sounds={0:green,1:red,2:yellow,3:blue},startButton=document.querySelector("button"),score=document.getElementById("score");score.classList.add("animate__animated");let power=!1;function reset(){playerTurn=!1,level=0,sequence=[],playerSequence=[]}function resetLights(){document.querySelectorAll(".colors").forEach(e=>{e.classList.contains("active")||e.classList.toggle("active")})}function randomNumber(){return Math.floor(4*Math.random())}function addNext(){let e=randomNumber();sequence.push(e)}function playThruSequence(){for(let e=0;e<sequence.length;e++)setTimeout(()=>{let t=sequence[e];sounds[t].play(),document.getElementById(`${colors[t]}`).classList.toggle("active"),e==sequence.length-1&&setTimeout(()=>playerTurn=!0,750)},700*(e+1)),setTimeout(()=>{document.getElementById(`${colors[sequence[e]]}`).classList.toggle("active")},700*(e+1)+400)}function gameOver(){error.play(),reset(),setTimeout(()=>startGame,1e3)}function checkPlayersSequence(){if(power&&playerTurn&&colors.indexOf(this.id)>-1){this.classList.toggle("active"),setTimeout(()=>this.classList.toggle("active"),200);let e=colors.indexOf(this.id);e==sequence[level]?(playerSequence.push(e),sounds[e].play(),level++):gameOver(),playerSequence.length==sequence.length&&(playerTurn=!1,playerSequence=[],level=0,startGame())}}function startGame(){power=!0,score.textContent=sequence.length,setTimeout(()=>{addNext(),playThruSequence(),checkPlayersSequence()},1e3)}startButton.addEventListener("click",()=>{reset(),(power=!power)&&(score.classList.remove("animate__zoomOut"),score.classList.add("animate__zoomIn"),startGame()),power||(resetLights(),score.classList.remove("animate__zoomIn"),score.textContent="GOODBYE",setTimeout(()=>score.classList.add("animate__zoomOut"),1e3),setTimeout(()=>{score.textContent=""},2e3))}),document.querySelectorAll(".colors").forEach(e=>{e.addEventListener("click",checkPlayersSequence)});